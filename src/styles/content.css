@reference "./globals.css";

.content {
  img {
    @apply rounded-md;
  }

  img.content-image-clickable {
    @apply cursor-zoom-in transition-opacity duration-200;

    &:hover {
      @apply opacity-90;
    }

    &:focus-visible {
      @apply ring-secondary/80 rounded-md ring-2 ring-offset-2 ring-offset-slate-950 outline-none;
    }
  }

  .astro-code,
  .hljs {
    @apply bg-code/50!;
  }

  pre {
    @apply bg-code/50! overflow-x-auto rounded-xl border border-slate-700/80 p-4;

    ul + & {
      @apply mt-8;
    }

    & + ul {
      @apply mt-8;
    }

    pre + & {
      @apply mt-8;
    }

    p + & {
      @apply mt-8;
    }

    &.astro-code {
      @apply relative p-0;

      code {
        @apply block py-4 font-mono text-sm leading-6;
        counter-reset: line;
      }

      code .line {
        @apply block px-4;
      }

      code .line::before {
        content: counter(line);
        counter-increment: line;
        @apply mr-4 inline-block w-8 border-r border-slate-700/70 pr-3 text-right text-xs text-slate-500 select-none;
      }
    }

    &.astro-code[data-language]::before {
      content: attr(data-language);
      @apply text-secondary absolute top-3 right-4 rounded-full border border-slate-700/80 bg-slate-900/80 px-2.5 py-0.5 text-[10px] font-semibold tracking-[0.12em] uppercase;
    }

    &.astro-code[data-language] code {
      @apply pt-10;
    }

    code.language-jsx {
      .hljs-string,
      .hljs-template-variable {
        @apply text-emerald-400;
      }

      /* Keywords */
      .hljs-keyword,
      .hljs-selector-tag {
        @apply text-red-400;
      }

      /* Comments */
      .hljs-comment {
        @apply text-neutral-600 italic;
      }

      /* Identifiers / variables */
      .hljs-variable,
      .hljs-title {
        @apply text-slate-200;
      }

      /* Classes */
      .hljs-class {
        @apply text-blue-400;
      }

      /* Properties / attributes */
      .hljs-attr,
      .hljs-attribute {
        @apply text-purple-400;
      }

      /* JSX / HTML tags */
      .hljs-tag,
      .hljs-name {
        @apply text-slate-200;
      }

      /* Built-ins / entities */
      .hljs-built_in,
      .hljs-function {
        @apply text-blue-400;
      }

      /* Punctuation / signs */
      .hljs-punctuation {
        @apply text-slate-400;
      }

      .language-xml {
        .hljs-tag {
          @apply text-slate-400;
        }

        .hljs-name {
          @apply text-blue-400;
        }
      }
    }

    code.language-console {
      .hljs-string {
        @apply text-emerald-400;
      }

      .hljs-keyword {
        @apply text-red-400;
      }

      .hljs-comment {
        @apply text-neutral-600 italic;
      }

      .hljs-variable,
      .hljs-title {
        @apply text-slate-200;
      }

      .hljs-class,
      .hljs-built_in,
      .hljs-function {
        @apply text-blue-400;
      }

      .hljs-attr,
      .hljs-attribute {
        @apply text-purple-400;
      }

      .hljs-punctuation {
        @apply text-slate-400;
      }
    }

    code.language-CSS {
      .hljs-keyword,
      .hljs-selector-tag {
        @apply text-rose-400;
      }

      .hljs-comment {
        @apply text-slate-500 italic;
      }

      .hljs-tag,
      .hljs-name,
      .hljs-class {
        @apply text-indigo-400;
      }

      .hljs-attr,
      .hljs-attribute,
      .hljs-built_in {
        @apply text-amber-400;
      }

      .hljs-punctuation {
        @apply text-slate-400;
      }

      .hljs-string {
        @apply text-emerald-400;
      }

      .hljs-variable,
      .hljs-title {
        @apply text-slate-200;
      }
    }
  }

  h2 {
    @apply text-primary mb-8 text-2xl leading-tight font-bold;

    p + &,
    p + p,
    p + h2 {
      @apply mt-8;
    }

    pre + & {
      @apply mt-8;
    }
  }

  @media (min-width: 1024px) {
    .content h2 {
      @apply text-2xl;
    }
  }

  h3 {
    @apply text-primary my-10 text-xl leading-tight font-semibold;
  }

  p {
    @apply text-base leading-8 text-slate-300;

    a {
      @apply text-secondary text-sm underline underline-offset-4 transition-colors;

      &:hover {
        @apply text-primary;
      }
    }

    p + & {
      @apply mt-6 mb-6;
    }

    em {
      @apply text-slate-400;
    }

    pre + & {
      @apply mt-8 mb-6;
    }

    code {
      color: var(--color-secondary);
      background-color: var(--color-code);
      @apply rounded-md px-2 py-1 text-sm;
    }
  }

  blockquote {
    @apply text-secondary my-8 rounded-[28px] border border-slate-700/80 bg-slate-900/55 px-6 py-5 text-base leading-8 italic;

    p {
      @apply text-secondary text-base leading-8;

      p + & {
        @apply mt-4;
      }
    }
  }

  hr {
    @apply my-16 border-0 border-t border-slate-700/80;
  }

  ul {
    @apply list-disc ps-8;

    & + h2 {
      @apply mt-8;
    }

    p + & {
      @apply mt-8;
    }

    & + p {
      @apply mt-8;
    }

    li + li {
      @apply mt-3;
    }

    li {
      @apply text-secondary leading-8;

      code {
        @apply text-secondary bg-code rounded-md px-2 py-1 text-sm;
      }
    }
  }

  ol {
    @apply list-decimal ps-8;

    & + h2 {
      @apply mt-8;
    }

    p + & {
      @apply mt-8;
    }

    & + p {
      @apply mt-8;
    }

    li + li {
      @apply mt-3;
    }

    li {
      @apply text-secondary leading-8;

      code {
        @apply text-secondary bg-code rounded-md px-2 py-1 text-sm;
      }
    }
  }
}

.content-image-modal {
  @apply fixed inset-0 m-0 max-h-none max-w-none border-0 bg-transparent p-4 md:p-6;
  width: 100vw;
  height: 100dvh;
  box-sizing: border-box;
  overflow: hidden;

  &::backdrop {
    @apply bg-slate-950/90 backdrop-blur-sm;
  }
}

.content-image-modal[open] {
  display: flex;
  flex-direction: column;
}

.content-image-modal-toolbar {
  @apply mb-3 flex flex-wrap items-center justify-between gap-3;
}

.content-image-modal-zoom {
  @apply text-secondary text-sm font-medium;
}

.content-image-modal-actions {
  @apply flex flex-wrap items-center justify-end gap-2;
}

.content-image-modal-action {
  @apply bg-background/95 text-primary border-tertiary rounded-full border px-4 py-2 text-sm font-medium transition-colors disabled:cursor-not-allowed disabled:opacity-50;

  &:hover:not(:disabled) {
    @apply bg-slate-800;
  }
}

.content-image-modal-close {
  @apply px-5;
}

.content-image-modal-viewport {
  @apply relative min-h-0 w-full flex-1 overflow-hidden rounded-md border border-slate-800 bg-slate-950;
  touch-action: none;
}

.content-image-modal-viewport.is-pannable {
  @apply cursor-grab;
}

.content-image-modal-viewport.is-dragging {
  @apply cursor-grabbing;
}

.content-image-modal-image {
  @apply pointer-events-none absolute top-1/2 left-1/2 max-w-none rounded-md select-none;
  transform-origin: center center;
  will-change: transform;
}

.content-image-modal-caption {
  @apply text-secondary mx-auto mt-3 max-w-[95%] text-center text-sm leading-relaxed;
}
